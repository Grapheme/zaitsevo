var App=function(){"use strict";$(function(){$(".fancybox").fancybox({helpers:{overlay:{locked:!1}}})}),jQuery.fn.objectTabs=function(){var e=$(this),t=e.find(".objects-item"),s=e.find(".obj-tabs"),a=e.find(".obj-tab-item"),i=e.find(".js-tabs-close"),o=e.find(".js-nav-left"),n=e.find(".js-nav-right");i.click(function(){e.trigger("close-tabs")}),o.click(function(){e.trigger("prev-obj-tab")}),n.click(function(){e.trigger("next-obj-tab")}),t.click(function(){e.trigger("open-tabs",[$(this)])}),e.bind("open-tabs",function(e,t){var i=t.attr("id");s.removeClass("hidden"),a.addClass("hidden").removeClass("active").filter('[data-to="'+i+'"]').addClass("active").removeClass("hidden")}),e.bind("close-tabs",function(){s.addClass("hidden"),a.addClass("hidden")}),e.bind("next-obj-tab",function(){var e,t=a.filter(".active");e=t.is(":last-child")?a.filter(":first-child"):t.next(),a.addClass("hidden").removeClass("active"),e.removeClass("hidden").addClass("active")}),e.bind("prev-obj-tab",function(){var e,t=a.filter(".active");e=t.is(":first-child")?a.filter(":last-child"):t.prev(),a.addClass("hidden").removeClass("active"),e.removeClass("hidden").addClass("active")})},jQuery.fn.housePlans=function(){var e=$(this),t=e.find(".house-plan"),s=e.find(".houses-item");s.click(function(){var e=$(this).data("plan");s.removeClass("active"),$(this).addClass("active"),t.hide(),t.filter('[data-plan="'+e+'"]').fadeIn(400)})},$(".objects-list").objectTabs(),$(".section-houses-proj").housePlans();var e=skrollr.init({forceHeight:!1,constants:{map:parseInt($(".section-map").offset().top),mapend:parseInt($(".section-map").offset().top+$(".section-map").height()),ffooter:parseInt($(".section-footer-form").offset().top),ffooterend:parseInt($(".section-footer-form").offset().top+$(".section-map").height()),main:parseInt($(".section-main").offset().top),about:parseInt($(".section-about").offset().top),objects:parseInt($(".section-objects").offset().top),areas:parseInt($(".section-areas").offset().top),houses:parseInt($(".section-houses-proj").offset().top)}});skrollr.menu.init(e,{}),$(".checkbox").button(),$("input[type=file]").nicefileinput({label:"Выберите файл"}),$(".phone-input").inputmask("mask",{mask:"[+7] (999) 999-9999",showMaskOnHover:!1}),$("#feedback-form").validate({rules:{phone:"required",email:{required:!0,email:!0}},messages:{phone:"Обязательное поле",email:{required:"Обязательное поле",email:"Неверный формат"}}}),$(".order-call-form").validate({rules:{phone:"required",name:"required"},messages:{phone:"Обязательное поле",name:"Обязательное поле"}}),$(".leave-apply-form").validate({errorPlacement:function(){return!0},rules:{projname:"required",address:"required",email:{required:!0,email:!0},phone:"required",site:"required",rname:"required",remail:{required:!0,email:!0},rphone:"required"},messages:{projname:"Обязательное поле",address:"Обязательное поле",email:{required:"Обязательное поле",email:"Неверный формат"},phone:"Обязательное поле",site:"Обязательное поле",rname:"Обязательное поле",remail:{required:"Обязательное поле",email:"Неверный формат"},rphone:"Обязательное поле"}})}(),Popup=function(){"use strict";var e=$(".overlay"),t=$(".popup"),s=$(".js-popup-close"),a=$(".js-btn-order"),i=$(".js-btn-compet"),o=$("html");return s.click(function(){Popup.close()}),t.click(function(e){e.stopPropagation()}),e.click(function(){Popup.close()}),a.click(function(e){e.preventDefault(),Popup.show("order-call")}),i.click(function(e){e.preventDefault(),Popup.show("leave-apply")}),{show:function(s){e.fadeIn(400),t.removeClass("active"),$('[data-popup="'+s+'"]').addClass("active"),o.css({overflow:"hidden"})},close:function(){e.fadeOut(400),t.removeClass("active"),o.removeAttr("style")}}}();